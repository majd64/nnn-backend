(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{119:function(e,a,t){},120:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),s=t.n(l),c=t(8),u=t(25),i=t(28),m=t(11),o=t.n(m),d=t(20),f=t.n(d);var E=function(e){e.auth&&e.history.push("/");var a=Object(n.useState)(null),t=Object(c.a)(a,2),l=t[0],s=t[1],m=Object(n.useState)(!1),d=Object(c.a)(m,2),E=d[0],b=d[1],p=Object(n.useState)({username:"",email:"",password:"",password2:""}),h=Object(c.a)(p,2),v=h[0],g=h[1];function N(e){var a=e.target,t=a.value,n=a.name;g((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(u.a)({},n,t))}))}return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"container d-flex h-100 align-items-center"},r.a.createElement("div",{className:"mx-auto text-center"},r.a.createElement("h1",null,v.username?v.username.length>12?"Hello "+v.username.substring(0,12)+"...":"Hello "+v.username:"Hello"),r.a.createElement("form",null,r.a.createElement("input",{className:"input",value:v.email,onChange:N,name:"email",placeholder:"Email",type:"Username",autoComplete:"no"}),r.a.createElement("input",{className:"input",value:v.username,onChange:N,placeholder:"Username",name:"username",autoComplete:"no"}),r.a.createElement("input",{className:"input",value:v.password,onChange:N,name:"password",placeholder:"Password",type:"password",autoComplete:"no"}),r.a.createElement("input",{className:"input",value:v.password2,onChange:N,name:"password2",placeholder:"Confirm Password",type:"password",autoComplete:"no"}),r.a.createElement("button",{type:"submit",onClick:function(a){a.preventDefault(),o.a.post("/api/register",f.a.stringify(v)).then((function(a){"success"===a.data.status?(s(null),b(!0),setTimeout((function(){e.reAuth()}),2e3)):s(a.data.message)})).catch((function(){s("an unknown error occured")}))},className:"form-button btn btn-danger join-button"},"Sign Up"),l&&r.a.createElement("div",{className:"invalid-feedback d-block"},l),E&&r.a.createElement("div",{className:"valid-feedback d-block"},"Success! Please verify your email address")))))};var b=function(e){e.auth&&e.history.push("/");var a=Object(n.useState)(null),t=Object(c.a)(a,2),l=t[0],s=t[1],m=Object(n.useState)(!1),d=Object(c.a)(m,2),E=d[0],b=d[1],p=Object(n.useState)({email:"",password:""}),h=Object(c.a)(p,2),v=h[0],g=h[1];function N(e){var a=e.target,t=a.value,n=a.name;g((function(e){return Object(i.a)(Object(i.a)({},e),{},Object(u.a)({},n,t))}))}return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"container d-flex h-100 align-items-center"},r.a.createElement("div",{className:"mx-auto text-center"},r.a.createElement("h1",null,"Welcome back!"),r.a.createElement("form",{autoComplete:"new-password"},r.a.createElement("input",{autoFocus:!0,id:"email",className:"input",value:v.email,onChange:N,name:"email",placeholder:"Email",type:"email"}),r.a.createElement("input",{id:"password",className:"input",value:v.password,onChange:N,name:"password",placeholder:"Password",type:"password"}),r.a.createElement("button",{onClick:function(a){a.preventDefault(),o.a.post("/api/login",f.a.stringify(v)).then((function(a){"success"===a.data.status?(b(!0),setTimeout((function(){e.reAuth()}),500)):s(a.data.message)})).catch((function(){s("invalid username or password")}))},className:"form-button btn btn-danger join-button"},"Log in"),l&&r.a.createElement("div",{className:"invalid-feedback d-block"},l),E&&r.a.createElement("div",{className:"valid-feedback d-block"},"Success!")))))};var p=function(e){return r.a.createElement("div",null,"About")};var h=function(e){return r.a.createElement("div",null,"rules")},v=t(17),g=t(137),N=t(138),y=t(140);var j=function(e){var a=Object(n.useState)(u()),t=Object(c.a)(a,2),l=t[0],s=t[1];function u(){var e=Date.parse("Nov 1 2020")-Date.parse(new Date),a=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60),n=Math.floor(e/36e5%24);return Math.floor(e/864e5)+":"+n+":"+t+":"+a}switch(Object(n.useEffect)((function(){setTimeout((function(){s(u())}),1e3)})),e.size){case 1:return r.a.createElement("h1",{style:e.style,className:e.className},l);case 2:return r.a.createElement("h2",{style:e.style,className:e.className},l);case 3:return r.a.createElement("h3",{style:e.style,className:e.className},l);case 4:return r.a.createElement("h4",{style:e.style,className:e.className},l);case 5:return r.a.createElement("h5",{style:e.style,className:e.className},l);case 6:return r.a.createElement("h6",{style:e.style,className:e.className},l);default:return r.a.createElement("h5",{style:e.style,className:e.className},l)}};var O=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{className:"fixed-top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(v.b,{className:"navbar-brand",to:"/"},"NNN"),r.a.createElement(j,{style:{color:"white"},className:"my-auto ml-3",size:5}),r.a.createElement(N.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(N.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(y.a,{className:"mr-auto"}),r.a.createElement(y.a,null,r.a.createElement(v.b,{className:"mr-2 nav-link",to:"/about"},"About"),r.a.createElement(v.b,{className:"mr-3 nav-link",to:"/rules"},"Rules"),e.auth?r.a.createElement(g.a,{onClick:e.logout,variant:"outline-light"},"Log out"):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.b,{className:"btn btn-outline-light mr-3",to:"/login"},"Log in"),r.a.createElement(v.b,{className:"btn btn-danger",to:"/register"},"Join the boys!"))))))};var k=function(e){return r.a.createElement("header",{className:"center"},r.a.createElement("div",{className:"container d-flex h-100 align-items-center"},r.a.createElement("div",{className:"mx-auto text-center"},r.a.createElement("h1",{className:"mx-auto mt-2 mb-0"},"No Nut November"),r.a.createElement("h5",{className:"mx-auto mt-2 mb-0"},r.a.createElement("em",null,"Where boys become men.")),r.a.createElement(j,{className:"mx-auto mt-2 mb-5",size:5}),r.a.createElement("h5",null,"36,847 comrades"),r.a.createElement(v.b,{className:"btn btn-danger",to:"/register"},"Join the boys!"))))};t(41);var w=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"friend"},r.a.createElement("img",{className:"img-circle",width:"60",height:"60",alt:"profile",src:"https://cdn.jpegmini.com/user/images/slider_puffin_before_mobile.jpg"}),r.a.createElement("div",{className:"friend-text"},r.a.createElement("div",{style:{position:"relative",top:"15%"}},r.a.createElement("h6",{className:"friend-name"},r.a.createElement("strong",null,e.name)),r.a.createElement("br",null),r.a.createElement("p",{className:"friend-subtitle"},"Did nut: ",e.didNut.toString())))))},x=t(139),S=t(67),C=t.n(S),F=t(66),q=t.n(F);var R=function(e){function a(a){var t;t=a?"/api/user/friendRequest/true":"/api/user/friendRequest/false",o.a.post(t,f.a.stringify({friendId:e.friend._id})).then((function(a){console.log(a.data),"success"===a.data.status&&e.getFriends()}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"friend friend-request",style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement("img",{className:"img-circle",width:"60",height:"60",alt:"profile",src:"https://cdn.jpegmini.com/user/images/slider_puffin_before_mobile.jpg"}),r.a.createElement("h6",{className:"friend-name"},r.a.createElement("strong",null,e.friend.username))),r.a.createElement("div",{className:"my-auto",style:{display:"inline-block"}},r.a.createElement(x.a,{onClick:function(){return a(!0)},size:"small",color:"primary","aria-label":"add"}," ",r.a.createElement(q.a,null)," "),r.a.createElement(x.a,{onClick:function(){return a(!1)},className:"ml-2",size:"small",color:"secondary","aria-label":"deny"}," ",r.a.createElement(C.a,null)," "))))},U=t(68),z=t.n(U);var A=function(e){var a=Object(n.useState)([]),t=Object(c.a)(a,2),l=t[0],s=t[1],u=Object(n.useState)([]),i=Object(c.a)(u,2),m=i[0],d=i[1],E=Object(n.useState)(""),b=Object(c.a)(E,2),p=b[0],h=b[1],v=Object(n.useState)({sentRequest:!1,didFindUser:!1,isSelf:!1}),g=Object(c.a)(v,2),N=g[0],y=g[1];function j(){o.a.get("/api/user/friends").then((function(e){console.log(e.data),"success"===e.data.status&&(s(e.data.friends),d(e.data.friendRequests))}))}return Object(n.useEffect)((function(){j()}),[l.length]),r.a.createElement("div",{className:"friends-list shadow-sm"},r.a.createElement("h4",null,"Add Friend"),r.a.createElement("input",{className:"search-friend-input",name:"username",placeholder:"Enter a username",autoComplete:"no",value:p,onChange:function(e){h(e.target.value)}}),r.a.createElement(x.a,{onClick:function(a){a.preventDefault(),p.trim()!==e.user.username?o.a.post("/api/user/sendFriendRequest",f.a.stringify({newfriendusername:p})).then((function(e){"success"===e.data.status?y({sentRequest:!0,didFindUser:!0,isSelf:!1}):y({sentRequest:!0,didFindUser:!1,isSelf:!1})})):y({sentRequest:!1,didFindUser:!1,isSelf:!0})},size:"small",color:"secondary","aria-label":"add"},r.a.createElement(z.a,null)),N.sentRequest&&!N.didFindUser&&r.a.createElement("div",{className:"invalid-feedback d-block"},"Cannot find user"),N.isSelf&&r.a.createElement("div",{className:"invalid-feedback d-block"},"You cannot add yourself silly"),N.sentRequest&&N.didFindUser&&r.a.createElement("div",{className:"valid-feedback d-block"},"Sent friend request"),r.a.createElement("hr",null),r.a.createElement("h4",null,"Friends"),l.map((function(e,a){return r.a.createElement(w,{key:a,id:a,name:e.username,didNut:e.didNut})})),r.a.createElement("hr",null),r.a.createElement("h4",null,"Friend Requests"),m.map((function(e,a){return r.a.createElement(R,{key:a,id:a,friend:e,getFriends:j})})))};var D=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{user:e.user}),r.a.createElement("div",{style:{overflow:"hidden"}},r.a.createElement("h1",null,"Hello ",e.user&&e.user.username),r.a.createElement("div",{className:"container d-flex align-items-center"},r.a.createElement("div",{className:"mx-auto nut-buttons"},r.a.createElement(g.a,{disabled:!0,variant:"danger",size:"lg"},"Large Button")," ",r.a.createElement(g.a,{disabled:!0,variant:"danger",size:"lg"},"Large Button")," "))))};function _(e){return e.auth?r.a.createElement(D,{user:e.user}):r.a.createElement(k,null)}var L=function(e){return r.a.createElement(_,{user:e.user,auth:e.auth})},H=t(5);t(118),t(119);var J=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],l=a[1],s=Object(n.useState)(null),u=Object(c.a)(s,2),i=u[0],m=u[1];function d(){o.a.get("/api/user").then((function(e){console.log(e.data),"success"===e.data.status?(l(!0),m(e.data.user)):(l(!1),m(null))}))}return Object(n.useEffect)((function(){d()}),[t]),r.a.createElement(v.a,null,r.a.createElement(O,{auth:t,reAuth:d,logout:function(){o.a.get("/api/logout").then((function(){return d()}))}}),r.a.createElement(H.a,{path:"/",exact:!0,render:function(e){return r.a.createElement(L,Object.assign({},e,{auth:t,user:i}))}}),r.a.createElement(H.a,{path:"/register",exact:!0,render:function(e){return r.a.createElement(E,Object.assign({},e,{auth:t,reAuth:d}))}}),r.a.createElement(H.a,{path:"/login",exact:!0,render:function(e){return r.a.createElement(b,Object.assign({},e,{auth:t,reAuth:d}))}}),r.a.createElement(H.a,{path:"/about",exact:!0,component:p}),r.a.createElement(H.a,{path:"/rules",exact:!0,component:h}))};s.a.render(r.a.createElement(J,null),document.getElementById("root"))},41:function(e,a,t){},71:function(e,a,t){e.exports=t(120)}},[[71,1,2]]]);
//# sourceMappingURL=main.4bd5c55e.chunk.js.map